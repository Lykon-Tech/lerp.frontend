<p-toast></p-toast>

<div class="card mb-5 p-4">
  <div class="font-semibold text-xl mb-4">Selecionar Curso</div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="curso" class="block text-sm font-medium text-gray-700 mb-1">Curso</label>
      <p-select 
        name="cursos" 
        [(ngModel)]="curso" 
        inputId="curso" 
        [options]="cursos_select" 
        (onChange)="onSelect($event)"
        optionLabel="label" 
        optionValue="value"
        placeholder="Selecione um curso"
        [appendTo]="'body'"
        class="w-full"
      ></p-select>
    </div>
  </div>
</div>

<div class="card mb-5 p-4">
  <div class="font-semibold text-xl mb-4">Selecionar Turmas</div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Turma origem</label>
      <p-autocomplete 
        [(ngModel)]="turmasA"
        [suggestions]="filtroTurmaA"
        [minLength]="0"
        optionLabel="nome"
        placeholder="Pesquisar Turma A"
        dropdown
        [forceSelection]="false"
        (completeMethod)="filterTurma($event, 'TURMA_A')"
        (onSelect)="selecionarTurma($event, 'TURMA_A')"
        class="w-full"
      ></p-autocomplete>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Turma destino</label>
      <p-autocomplete 
        [(ngModel)]="turmasB"
        [suggestions]="filtroTurmaB"
        [minLength]="0"
        optionLabel="nome"
        placeholder="Pesquisar Turma B"
        dropdown
        [forceSelection]="false"
        (completeMethod)="filterTurma($event, 'TURMA_B')"
        (onSelect)="selecionarTurma($event, 'TURMA_B')"
        [disabled]="!turmasA"
        class="w-full"
      ></p-autocomplete>

    </div>
  </div>
</div>

<div class="card mb-5 p-4">
  <div class="font-semibold text-xl mb-4">TransferÃªncia entre turmas</div>

  <p-pick-list 
    [source]="turmaA?.alunos || []" 
    [target]="turmaB?.alunos || []" 
    [disabled]="!turmasA || !turmasB"
    breakpoint="1400px"
    class="w-full"
  >
    <ng-template let-aluno pTemplate="item">
      {{ aluno.alunoNome }}
    </ng-template>
  </p-pick-list>
</div>


<div class="flex justify-end gap-3 mt-6">
  <p-button label="Salvar" icon="pi pi-check" (click)="save()" class="p-button-success"></p-button>
</div>

<p-confirmdialog [style]="{ width: '450px' }"></p-confirmdialog>
